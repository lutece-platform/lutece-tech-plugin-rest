<div id="one-zone-first">
    <div id="one-zone-first-content">

	<h2>#i18n{module.mylutece.database.xpage.change_password.pageTitle}</h2>
	
	<#if action_successful?has_content>
		<h3>#i18n{module.mylutece.database.message.change_password.success}</h3>
		<form class="default-form" id="changePassword" name="changePassword" action="${action_successful}" method="post">
			<table align="center">
				<tr>
					<td>
						<input class="site-buttons" id="button-return" type="submit" name="btnBack" value="#i18n{module.mylutece.database.xpage.account.btnBack}" />
	                   </td>
	       	    </tr>
	      	   	</table>
		</form>
	<#else>
	
		<#if error_code?has_content >
			<#assign typeClass = "class=\"error\"" />
		
			<#if error_code = "error_mandatory_fields">
				<div class="alert">#i18n{module.mylutece.database.message.account.errorMandatoryFields}</div>
				<#assign classOldPassword = typeClass />
				<#assign classNewPassword = typeClass />
				<#assign classConfirmation = typeClass />
			</#if>
			<#if error_code = "error_old_password">
				<div class="alert">#i18n{module.mylutece.database.message.change_password.badOldPassword}</div>
				<#assign classOldPassword = typeClass />
			</#if>
			<#if error_code = "error_confirmation_password">
				<div class="alert">#i18n{module.mylutece.database.message.account.errorConfirmation}</div>
				<#assign classNewPassword = typeClass />
				<#assign classConfirmation = typeClass />
			</#if>
			<#if error_code = "error_same_password">
				<div class="alert">#i18n{module.mylutece.database.message.change_password.errorSamePassword}</div>
				<#assign classOldPassword = typeClass />
				<#assign classNewPassword = typeClass />
				<#assign classConfirmation = typeClass />
			</#if>
		</#if>	
		
		<form class="default-form" id="changePassword" name="changePassword" action="jsp/site/plugins/mylutece/modules/database/DoChangePassword.jsp" method="post">
			<input type="hidden" name="plugin_name" value="${plugin_name}" />
	        <fieldset>
				
		        <p>
		            <label class="text-label" for="old_password">#i18n{module.mylutece.database.xpage.change_password.oldPassword} * : </label>
		            <input type="text" ${classOldPassword?if_exists} name="old_password" id="old_password" maxlength="100" size="35" tabindex="1" value="" />
		            <br />
		            <label class="text-label" for="new_password">#i18n{module.mylutece.database.xpage.change_password.newPassword} * : </label>
		            <input type="password" ${classNewPassword?if_exists} name="new_password" id="new_password" maxlength="100" size="35" tabindex="2"  value="" />
		            <br />
		            <label class="text-label" for="confirmation_password">#i18n{module.mylutece.database.xpage.change_password.confirmationPassword} * : </label>
		            <input type="password" ${classConfirmation?if_exists} id="confirmation_password" name="confirmation_password" maxlength="100" size="35" tabindex="3" value="" />
				</p>
		        <table align="center">
					<tr>
						<td>
							<input class="site-buttons" id="button-subscribe" type="submit" name="changePassword" value="#i18n{module.mylutece.database.xpage.change_password.btnValidate}" />
	                    </td>
						<td>
							<input class="site-buttons" id="button-return" type="button" name="back" value="#i18n{module.mylutece.database.xpage.account.btnBack}" onclick='javascript:history.go(-1)'/>
	                    </td>
		       	    </tr>
	       	   	</table>
			</fieldset>
		</form>
	</#if>
	</div>
</div>